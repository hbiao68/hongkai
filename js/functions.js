/**
 * Scripts for mobile web application
 * @author Peng Wei, 97517576[at]qq.com
 * @date 2015-06-17
 */
!function(e){"use strict";function a(){console.log("Loading resources...")}function c(){if(console.log("Load resources completed"),$(".view-loading").hide(),console.log("Loading View closed"),$(".view-main").css({visibility:"visible"}).show(),console.log("Main View loaded"),"undefined"!=typeof Swiper){new Swiper(".swiper-container",{pagination:".swiper-pagination",slidesPerView:1,paginationClickable:!0,spaceBetween:0,loop:!0})}}$(function(){var e=$(".view-main");e.imagesLoaded().progress(a).always(c)})}(window),$(document).ready(function(e){var a=$(".view-main>.pages>.page").attr("data-page");console.log(a+" page initialized"),"undefined"!=typeof $().iCheck?($("input.icheck").each(function(e,a){$(this).iCheck({checkboxClass:"icheckbox_flat-red",radioClass:"iradio_flat-red",increaseArea:"20%"})}),$("input.checkall").on("ifChecked",function(e){$("input:checkbox").iCheck("check")}),$("input.checkall").on("ifUnchecked",function(e){$("input:checkbox").iCheck("uncheck")})):$("input.checkall").each(function(){$(this).on("click",function(){!0===$(this).prop("checked")?$("input:checkbox").each(function(){$(this).prop("checked",!0)}):$("input:checkbox").each(function(){$(this).prop("checked",!1)})})});var c=function(){$("body").addClass("with-searchbar"),$(".searchbar").addClass("searchbar-active"),$(".searchbar-overlay").addClass("searchbar-overlay-active")},i=function(){$("body").removeClass("with-searchbar"),$(".searchbar").removeClass("searchbar-active"),$(".searchbar-overlay").removeClass("searchbar-overlay-active")},n=function(){$(".searchbar").removeClass("searchbar-not-empty"),$('.searchbar input[type="search"]').val("")},o=function(){$(".searchbar").addClass("searchbar-not-empty")};$(".searchbar .searchbar-input").on("click",function(){$('.searchbar input[type="search"]').focus(),$(".searchbar").hasClass("searchbar-active")||c()}),$('.searchbar input[type="search"]').on("keyup",function(){""!==$(this).val()?o():n()}).on("blur",function(){""===$(this).val()&&i()}),$(".searchbar-clear").on("click",function(){n()}),$(".searchbar-cancel").on("click",function(){$('.searchbar input[type="search"]').blur(),i(),n()})});